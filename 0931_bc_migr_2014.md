---
ai_optimized: true
author: Jeremy Tammik
complexity_score: 6.5
content_type: news
optimization_date: '2025-12-11T11:44:14.920702'
original_url: https://thebuildingcoder.typepad.com/blog/0931_bc_migr_2014.html
post_number: 0931
reading_time_minutes: 4
series: general
slug: bc_migr_2014
source_file: 0931_bc_migr_2014.htm
tags:
- csharp
- parameters
- references
- revit-api
- rooms
title: Migrating The Building Coder Samples to Revit 2014
word_count: 809
---

### Migrating The Building Coder Samples to Revit 2014

I started migrating The Building Coder samples to Revit 2014.
Funnily enough, on the exact same date as last year for the previous version.

The changes are very small this time around.

Furthermore, I am well prepared, since I recently intentionally eliminated all
[compiler warnings and deprecated calls](http://thebuildingcoder.typepad.com/blog/2013/02/eliminating-compiler-warnings-and-deprecated-calls.html) compiling
the code for Revit 2013.

First, however, a picture or three from my ski tour last wekend over Il Chapütschin (3386 m) and La Sella (3584 m) in the Swiss Engadin.
Here I am on the first summit:

![Il Chapütschin](file:///j/photo/jeremy/2013/2013-04-13_engadin/martin/p1010584_cropped.jpg)

The panorama is grandiose:

![Mountain panorama around Il Chapütschin](file:///j/photo/jeremy/2013/2013-04-13_engadin/martin/p1010587.jpg)

We arrive back at the hut tired and happy:

![Coffee in the hut](file:///j/photo/jeremy/2013/2013-04-13_engadin/martin/p1010668_cropped.jpg)

#### Migrating The Building Coder Samples to Revit 2014

Back at the desk and steeped in the Revit API, Here is what I have done so far to migrate The Building Coder samples from Revit 2013 to Revit 2014:

- [Update the Revit API assembly references](#2)- [Remove obsolete Collections namespace and RoomCreationData class](#3)- [TopographySurface namespace changed](#4)- [Some unit API changes](#5)- [Initial Revit 2014 version](#6)

#### Update the Revit API Assembly References

Every Revit add-in needs to reference the API assemblies.

They now live in the main Revit installation folder, together with Revit.exe.

In my case, this folder is "C:\Program Files\Autodesk\Revit Architecture 2014", and I am referencing the three assemblies RevitAPI, RevitAPIUI and UIFrameworkServices.

Just updating the references and recompiling generated
[5 errors and 3 warnings](zip/bc_migr_2014_a.txt).

#### Remove Obsolete Collections Namespace and RoomCreationData Class

Four of the five errors say "The type or namespace name 'Collections' does not exist in the namespace 'Autodesk.Revit' (are you missing an assembly reference?)".

To my surprise, I did indeed have several obsolete statements like this left over from previous versions:

```csharp
using Autodesk.Revit.Collections;
```

They were actually not required at all by the Revit 2013 compilation, just left over from still older versions.

The fifth warning is similar, saying "The type or namespace name 'RoomCreationData' does not exist in the namespace 'Autodesk.Revit.Creation' (are you missing an assembly reference?)", and could also be resolved simply by removing this obsolete using statement:
```csharp
using RoomCreationData
  = Autodesk.Revit.Creation.RoomCreationData;
```

Removing these erroneous using statements enables the compilation proper to execute and raises the number of problems reported to
[3 errors and 108 warnings](zip/bc_migr_2014_b.txt).

Just three errors!
Looking good...

#### TopographySurface Namespace Changed

Now we hit some real errors caused by slight shifts and redefinitions in the API.

The first error is in CmdLandXml.cs:
```csharp
  TopographySurface surface
    = doc.Create.NewTopographySurface( pts );
```

It says "The type or namespace name 'TopographySurface' could not be found (are you missing a using directive or an assembly reference?)".

The TopographySurface class apparently moved from one namespace to another.
In Revit 2013, it lived in Autodesk.Revit.DB.

This is easily remedied by placing the cursor over the offending class name and pressing Ctrl + '.', which brings up a menu listing the fully qualified class name and offering to automatically correct the error for you:

![Using Ctrl + '.'](img/bc_migr_2014_b.png)

#### Some Unit API Changes

The other two errors refer to units, one of the few areas seriously modified in the Revit 2014 API, and say:

- 'Autodesk.Revit.DB.Document' does not contain a definition for 'ProjectUnit' and no extension method 'ProjectUnit' accepting a first argument of type 'Autodesk.Revit.DB.Document' could be found (are you missing a using directive or an assembly reference?)
- 'Autodesk.Revit.DB.FormatOptions' does not contain a definition for 'Units' and no extension method 'Units' accepting a first argument of type 'Autodesk.Revit.DB.FormatOptions' could be found (are you missing a using directive or an assembly reference?)

They are caused by the following lines in ParameterUnitConverter.cs:

```csharp
  FormatOptions fo = document.ProjectUnit
    .get\_FormatOptions( ut );

  DisplayUnitType dut = fo.Units;
```

They are easily fixed by using the following new methods and properties:

```csharp
  FormatOptions fo = document.GetUnits()
    .GetFormatOptions( ut );

  DisplayUnitType dut = fo.DisplayUnits;
```

We are left with
[zero errors and 111 warnings](zip/bc_migr_2014_c.txt),
which we will leave to deal with another day.

#### Initial Revit 2014 Version

So here is the result, the very first
[version 2014.0.100.2](zip/bc_14_100_2.zip) of
The Building Coder samples for Revit 2014.

To compare with the last version for Revit 2013, look at the
[version 2013.0.100.2](zip/bc_13_100_2.zip) that
I provided after eliminating all
[compiler warnings and deprecated calls](http://thebuildingcoder.typepad.com/blog/2013/02/eliminating-compiler-warnings-and-deprecated-calls.html).